<%- include('header') %>

<!-- breadcrumb part start-->
<section class="organic-breadcrumb">
  <div class="container">
    <div class="row">
      <div class="col-md-4"></div>
      <div class="col-lg-7 mt-3">
        <div class="breadcrumb_iner">
          <h2>Order confirmation</h2>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- breadcrumb part end-->

<!--================ confirmation part start =================-->
<section class="confirmation_part section_padding">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="confirmation_tittle">
          <span class="mb-5">Thank you. Your order has been received.</span>
        </div>
      </div>
      <div class="col-lg-6 col-lx-4">
        <div class="single_confirmation_details">
          <h4>order info</h4>
          <ul>
            <li>
              <p>order number:</p>
              <span><%= order._id %></span>
            </li>
            <li>
              <p>date</p>
              <span>: <%= order.createdAt.toLocaleDateString() %> </span>
            </li>
            <li>
              <p>total</p>
              <span><%= order.total %></span>
            </li>
            <li>
              <p>payment method</p>
              <span><%= order.payment_method %></span>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-lg-6 col-lx-4">
        <div class="single_confirmation_details">
          <h4>Billing Address</h4>

          <p><%= specifiedAddress.name %></p>
          <p><%= specifiedAddress.add1 %>,<%= specifiedAddress.add2 %></p>
          <p><%= specifiedAddress.city %></p>
          <p><%= specifiedAddress.pin_number %></p>
          <p><%= specifiedAddress.phone %></p>
        </div>
      </div>
      <div class="col-lg-6 col-lx-4">
        <div class="single_confirmation_details">
          <h4>shipping Address</h4>

          <p><%= specifiedAddress.name %></p>
          <p><%= specifiedAddress.add1 %>,<%= specifiedAddress.add2 %></p>
          <p><%= specifiedAddress.city %></p>
          <p><%= specifiedAddress.pin_number %></p>
          <p><%= specifiedAddress.phone %></p>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="order_details_iner">
          <h3>Order Details</h3>
          <table class="table table-borderless">
            <thead>
              <tr>
                <th scope="col" colspan="2">Product</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total</th>
              </tr>
            </thead>
            <% cart.items.forEach(function(product) { %>
            <tbody>
              <tr>
                <th colspan="2"><%= product.product.name %></th>
                <th> x <%= product.quantity %></th>
                 <th> <span> &nbsp ₹ &nbsp</span> <span class="item-total">
                   <%= product.price * product.quantity %></span>
                </th>
              </tr>
              <% }); %>
              <tr>
                <th colspan="3">Subtotal</th>
                <th><span id="subtotal"> ₹ </span></th>
              </tr>
              <tr>
                <th colspan="3">shipping charges</th>
                <th><span> ₹ 50.00</span></th>
              </tr>
            </tbody>

            <tfoot>
              <tr>
                <th scope="col" colspan="3">TOTAL</th>
                <th><span> &nbsp ₹ &nbsp</span><span > <%= order.total %>  </span> </th>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>




<!--================ confirmation part end =================-->

<script>
  const setSubtotal = () => {
    const itemTotal = document.getElementsByClassName("item-total");
    let subtotal = 0;
    
    for (let i = 0; i < itemTotal.length; i++) {
      subtotal += Number(itemTotal[i].innerHTML);
    }
    document.getElementById("subtotal").innerHTML = subtotal;
  };
  setSubtotal();
</script>
<script>
  const setTotal = () => {
    const itemTotal = document.getElementsByClassName("item-total");
    let subtotal = 50;
    
    for (let i = 0; i < itemTotal.length; i++) {
      subtotal += Number(itemTotal[i].innerHTML);
    }

    document.getElementById("totalPrice").innerHTML = subtotal;
  };
  setTotal();
</script>

<%- include('footer') %>
